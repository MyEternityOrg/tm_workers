{% extends 'extworkers/base.html' %}
{% load static %}
{% block content %}
    <div class="card-body">
        <div class="d-inline p-2 bg-black bg-opacity-75 text-white">Подразделение: {{ enterprise.name }}</div>
        <div class="d-inline p-2 bg-black bg-opacity-75 text-white">Дата: {{ dts }}</div>
    </div>

    <div id="layoutSidenav_content">
        <main>
            <div class="container-fluid">
                <div class="card mb-4">
                    <div class="card-header"><i class="fas fa-table mr-1"></i>Список сотрудников</div>
                    <div class="card-body">
                        {% if object_list %}
                            <div class="table-responsive">
                                <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                                    <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Дата</th>
                                        <th>Номер магазина</th>
                                        <th>Адрес магазина</th>
                                        <th>Сотрудник ПРР</th>
                                        <th>Время начала работы</th>
                                        <th>Время завершения работы</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for item in object_list %}
                                        <tr>
                                            <td>{{ forloop.counter }}</td>
                                            <td>{{ item.dts }}</td>
                                            <td>{{ item.enterprise_guid.enterprise_code }}</td>
                                            <td>{{ item.enterprise_guid.name }}</td>
                                            <td>{{ item.person_name }}</td>
                                            <td>{{ item.f_time }}</td>
                                            <td>{{ item.t_time }}</td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        {% else %}
                            <div class="card-footer">Список пуст. Добавьте сотрудника.</div>
                        {% endif %}
                        <div class="card-footer"><a href="{% url 'person_add' enterprise.guid %}">
                            <button class="btn btn-success">Добавить сотрудника ПРР.</button>
                        </a>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
{% endblock %}